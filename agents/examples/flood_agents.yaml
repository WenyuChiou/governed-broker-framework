# Flood Domain Institutional Agents Configuration
# All parameters are 0-1 normalized

agents:
  # =========================================================================
  # INSURANCE AGENT
  # =========================================================================
  - name: "InsuranceCo"
    type: "insurance"
    
    role: "Regional flood insurance company managing risk and pricing"
    persona: |
      You are the Chief Risk Officer for a regional flood insurance company.
      Your primary goal is to maintain financial solvency while serving policyholders.
      You must balance risk management with market growth.
    
    state:
      - name: "loss_ratio"
        raw_range: [0, 1.5]         # 0-150%
        initial: 0.6                 # 60%
        description: "Claims paid / Premiums collected"
        
      - name: "solvency"
        raw_range: [0, 2000000]      # $0-$2M
        initial: 1000000             # $1M
        description: "Risk pool balance"
        
      - name: "premium_rate"
        raw_range: [0.02, 0.15]      # 2-15%
        initial: 0.05                # 5%
        description: "Annual premium as % of coverage"
        
      - name: "market_share"
        raw_range: [0, 1]            # 0-100%
        initial: 0.3                 # 30%
        description: "Policies / Total eligible households"
    
    perception:
      - type: "environment"
        source: "simulation"
        params: ["flood_occurred", "total_damage"]
        
      - type: "agent"
        source: "Household"
        params: ["avg_tp", "adoption_rate"]
    
    objectives:
      - name: "maintain_solvency"
        param: "solvency"
        target: [0.5, 1.0]           # > 50% of max pool
        weight: 0.4
        literature: "Dong 1996 - solvency-based pricing"
        
      - name: "target_loss_ratio"
        param: "loss_ratio"
        target: [0.4, 0.53]          # 60-80% in raw scale
        weight: 0.35
        literature: "Kousky 2017 - NFIP pricing"
        
      - name: "grow_market"
        param: "market_share"
        target: [0.3, 0.6]
        weight: 0.25
        literature: "Gourevitch 2025 - uptake effects"
    
    constraints:
      - name: "rate_change_limit"
        param: "premium_rate"
        max_change: 0.15             # ±15% per year
        bounds: [0, 1]               # Full 0-1 range in normalized
        literature: "NFIP Risk Rating 2.0"
        
      - name: "solvency_floor"
        param: "solvency"
        max_change: 1.0              # No limit on change
        bounds: [0.25, 1.0]          # Cannot go below 25%
        literature: "State insurance regulations"
    
    skills:
      - id: "raise_premium"
        description: "Increase premium rate to improve loss ratio"
        affects: "premium_rate"
        direction: "increase"
        literature: "Dong 1996"
        
      - id: "lower_premium"
        description: "Decrease premium rate to attract customers"
        affects: "premium_rate"
        direction: "decrease"
        literature: "Netusil 2021 - price elasticity"
        
      - id: "maintain_premium"
        description: "Keep premium rate unchanged"
        affects: null
        direction: "none"

  # =========================================================================
  # GOVERNMENT AGENT
  # =========================================================================
  - name: "StateGov"
    type: "government"
    
    role: "State hazard mitigation office managing subsidy programs"
    persona: |
      You are a State Hazard Mitigation Officer managing FEMA-funded programs.
      Your mandate is to reduce flood risk with equity focus on marginalized groups.
      You must balance budget constraints with community protection.
    
    state:
      - name: "budget_remaining"
        raw_range: [0, 500000]       # $0-$500K
        initial: 500000              # Full budget
        description: "Remaining annual budget"
        
      - name: "subsidy_rate"
        raw_range: [0.2, 0.95]       # 20-95%
        initial: 0.5                 # 50%
        description: "Government cost-share percentage"
        
      - name: "mg_adoption"
        raw_range: [0, 1]            # 0-100%
        initial: 0.1                 # 10%
        description: "Marginalized group adaptation rate"
        
      - name: "nmg_adoption"
        raw_range: [0, 1]            # 0-100%
        initial: 0.15                # 15%
        description: "Non-marginalized group adaptation rate"
        
      - name: "equity_gap"
        raw_range: [0, 1]            # 0-100%
        initial: 0.05                # 5%
        description: "Disparity between NMG and MG adoption"
    
    perception:
      - type: "environment"
        source: "simulation"
        params: ["flood_occurred", "year"]
        
      - type: "agent"
        source: "InsuranceCo"
        params: ["premium_rate", "market_share"]
        
      - type: "agent"
        source: "Household"
        params: ["pending_applications"]
    
    objectives:
      - name: "increase_mg_adoption"
        param: "mg_adoption"
        target: [0.4, 0.7]           # 40-70%
        weight: 0.4
        literature: "Siders 2021 - equity in retreat"
        
      - name: "reduce_equity_gap"
        param: "equity_gap"
        target: [0, 0.15]            # < 15% gap
        weight: 0.35
        literature: "Emrich 2022 - distributive inequity"
        
      - name: "budget_efficiency"
        param: "budget_remaining"
        target: [0.1, 0.3]           # Use 70-90% of budget
        weight: 0.25
        literature: "FEMA HMGP guidelines"
    
    constraints:
      - name: "subsidy_change_limit"
        param: "subsidy_rate"
        max_change: 0.15             # ±15% per year
        bounds: [0, 1]
        literature: "Policy stability"
        
      - name: "emergency_reserve"
        param: "budget_remaining"
        max_change: 1.0
        bounds: [0.1, 1.0]           # Keep 10% reserve
        literature: "FEMA emergency fund rules"
    
    skills:
      - id: "increase_subsidy"
        description: "Raise subsidy rate to boost adoption"
        affects: "subsidy_rate"
        direction: "increase"
        literature: "Mach 2019 - buyout effectiveness"
        
      - id: "decrease_subsidy"
        description: "Lower subsidy rate to conserve budget"
        affects: "subsidy_rate"
        direction: "decrease"
        literature: "Budget constraints"
        
      - id: "maintain_subsidy"
        description: "Keep subsidy rate unchanged"
        affects: null
        direction: "none"
        
      - id: "target_outreach"
        description: "Direct outreach to MG communities"
        affects: "mg_adoption"
        direction: "increase"
        literature: "Munoz 2016 - equity targeting"
