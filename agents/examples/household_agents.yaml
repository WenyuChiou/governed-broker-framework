# Household Agent Type Specification
# Domain: Flood Adaptation
# Framework: Protection Motivation Theory (PMT)
# Primary Literature: Rogers 1983, Bubeck 2012, Grothmann 2006

agents:
  # =========================================================================
  # HOUSEHOLD AGENT (MG - Marginalized Group)
  # =========================================================================
  - name: "HouseholdMG"
    type: "household_mg"
    
    role: "Flood-vulnerable household in marginalized community making adaptation decisions"
    persona: |
      You are a household decision-maker in a flood-prone, historically marginalized community.
      
      YOUR SITUATION:
      - Lower income, limited savings for large investments
      - May have experienced flood damage before
      - Strong place attachment (multi-generational home)
      - Less trust in government programs due to historical neglect
      
      DECISION FACTORS (PMT Framework):
      - Threat Appraisal: How severe is flood risk?
      - Coping Appraisal: Can I afford/execute protection?
      - Social Influence: What are neighbors doing?
      
      AVAILABLE ACTIONS:
      1. buy_insurance - Flood insurance (if owner: structure; if renter: contents)
      2. elevate_house - Raise home above flood level (owners only)
      3. relocate/buyout - Leave flood-prone area
      4. do_nothing - Wait and see
    
    # -------------------------------------------------------------------------
    # STATE PARAMETERS
    # -------------------------------------------------------------------------
    state:
      # --- Demographics ---
      - name: "income"
        raw_range: [20000, 200000]
        initial: 42000
        description: "Annual household income ($)"
        literature: "Census ACS 2020 - MG median=$42K vs NMG=$68K"
        
      - name: "property_value"
        raw_range: [50000, 1000000]
        initial: 180000
        description: "Home value for owners, 0 for renters ($)"
        literature: "Zillow ZHVI 2023 - MG areas 40% lower"
        
      # --- Risk State ---
      - name: "cumulative_damage"
        raw_range: [0, 500000]
        initial: 0
        description: "Total flood damage experienced ($)"
        literature: "FEMA NFIP claims data 2015-2022"
        
      - name: "flood_exposure"
        raw_range: [0, 1]
        initial: 0.6
        description: "Probability of flood in 100-year zone"
        literature: "FEMA flood maps - Zone AE baseline"
        
      # --- PMT Constructs (0-1 scale) ---
      - name: "threat_perception"
        raw_range: [0, 1]
        initial: 0.5
        description: "Perceived flood threat severity (TP)"
        literature: "Bubeck 2012 - TP predicts protective action"
        
      - name: "coping_capacity"
        raw_range: [0, 1]
        initial: 0.3
        description: "Perceived ability to protect (CP)"
        literature: "Grothmann 2006 - Income correlates with CP"
        
      - name: "self_efficacy"
        raw_range: [0, 1]
        initial: 0.4
        description: "Belief in ability to execute protection (SE)"
        literature: "Rogers 1983 - SE component of PMT"
        
      # --- Trust (0-1 scale) ---
      - name: "trust_government"
        raw_range: [0, 1]
        initial: 0.35
        description: "Trust in government programs"
        literature: "Wachinger 2013 - MG trust 30-40% lower"
        
      - name: "trust_insurance"
        raw_range: [0, 1]
        initial: 0.4
        description: "Trust in insurance companies"
        literature: "Kousky 2018 - NFIP trust varies by race"
        
      - name: "trust_neighbors"
        raw_range: [0, 1]
        initial: 0.6
        description: "Trust in neighbor information"
        literature: "Lo 2015 - Social networks key for MG"
        
      # --- Adaptation State ---
      - name: "has_insurance"
        raw_range: [0, 1]
        initial: 0
        description: "Currently insured (binary 0/1)"
        
      - name: "elevated"
        raw_range: [0, 1]
        initial: 0
        description: "Home is elevated (binary 0/1)"
        
      - name: "relocated"
        raw_range: [0, 1]
        initial: 0
        description: "Has relocated (binary 0/1)"
        
      # --- Place Attachment ---
      - name: "place_attachment"
        raw_range: [0, 1]
        initial: 0.7
        description: "Emotional bond to location"
        literature: "Bonaiuto 2016 - MG higher attachment"
    
    # -------------------------------------------------------------------------
    # OBJECTIVES (PMT-Driven)
    # -------------------------------------------------------------------------
    objectives:
      - name: "minimize_expected_loss"
        param: "cumulative_damage"
        target: [0.0, 0.2]
        weight: 0.35
        literature: "Botzen 2009 - Expected utility minimization"
        
      - name: "maintain_affordability"
        param: "income"
        target: [0.15, 0.85]
        weight: 0.35
        literature: "de Moel 2014 - 30% income cap on housing"
        
      - name: "preserve_place_attachment"
        param: "place_attachment"
        target: [0.5, 1.0]
        weight: 0.30
        literature: "Bonaiuto 2016 - Relocation psychological cost"
    
    # -------------------------------------------------------------------------
    # CONSTRAINTS
    # -------------------------------------------------------------------------
    constraints:
      - name: "income_limits_action"
        param: "coping_capacity"
        max_change: 0.10
        bounds: [0, 1]
        literature: "de Moel 2014 - Financial barriers to adaptation"
        
      - name: "once_elevated"
        param: "elevated"
        max_change: 1.0
        bounds: [0, 1]
        literature: "FEMA - Elevation is one-time action"
    
    # -------------------------------------------------------------------------
    # SKILLS (Decisions)
    # -------------------------------------------------------------------------
    skills:
      - id: "buy_insurance"
        description: "Purchase annual flood insurance"
        affects: "has_insurance"
        direction: "increase"
        literature: "Kousky 2017 - Insurance takeup decision"
        
      - id: "elevate_house"
        description: "Raise home above base flood elevation"
        affects: "elevated"
        direction: "increase"
        preconditions: ["tenure == Owner", "elevated == 0"]
        literature: "Xian 2017 - Elevation effectiveness"
        
      - id: "relocate"
        description: "Move out of flood-prone area"
        affects: "relocated"
        direction: "increase"
        preconditions: ["relocated == 0"]
        literature: "Siders 2019 - Managed retreat barriers"
        
      - id: "do_nothing"
        description: "Take no protective action"
        affects: null
        direction: "none"
    
    # -------------------------------------------------------------------------
    # PERCEPTION
    # -------------------------------------------------------------------------
    perception:
      - type: "environment"
        source: "simulation"
        params: ["flood_occurred", "flood_depth", "year"]
        
      - type: "agent"
        source: "InsuranceCo"
        params: ["premium_rate"]
        
      - type: "agent"
        source: "StateGov"
        params: ["subsidy_rate"]
        
      - type: "agent"
        source: "Neighbor"
        params: ["elevated", "has_insurance", "relocated"]

  # =========================================================================
  # HOUSEHOLD AGENT (NMG - Non-Marginalized Group)
  # =========================================================================
  - name: "HouseholdNMG"
    type: "household_nmg"
    
    role: "Flood-vulnerable household in non-marginalized community"
    persona: |
      You are a household decision-maker with moderate to high income.
      You have more resources and options for flood protection.
      
      KEY DIFFERENCES FROM MG:
      - Higher income and coping capacity
      - More trust in institutions
      - Lower place attachment (more mobile)
      - Better access to information
    
    state:
      - name: "income"
        raw_range: [20000, 200000]
        initial: 68000
        description: "Annual household income ($)"
        literature: "Census ACS 2020 - NMG median=$68K"
        
      - name: "property_value"
        raw_range: [50000, 1000000]
        initial: 320000
        description: "Home value ($)"
        literature: "Zillow ZHVI 2023 - NMG areas"
        
      - name: "threat_perception"
        raw_range: [0, 1]
        initial: 0.4
        description: "Perceived threat (often lower despite similar risk)"
        literature: "Bubeck 2013 - Optimism bias in affluent"
        
      - name: "coping_capacity"
        raw_range: [0, 1]
        initial: 0.65
        description: "Higher due to income"
        literature: "Grothmann 2006"
        
      - name: "trust_government"
        raw_range: [0, 1]
        initial: 0.55
        description: "Trust in government programs"
        literature: "Wachinger 2013"
        
      - name: "trust_insurance"
        raw_range: [0, 1]
        initial: 0.6
        description: "Trust in insurance"
        literature: "Kousky 2018"
        
      - name: "place_attachment"
        raw_range: [0, 1]
        initial: 0.45
        description: "Lower attachment, more mobile"
        literature: "Bonaiuto 2016"
        
      # Other params same as MG...
      - name: "cumulative_damage"
        raw_range: [0, 500000]
        initial: 0
        description: "Total damage ($)"
        
      - name: "has_insurance"
        raw_range: [0, 1]
        initial: 0
        
      - name: "elevated"
        raw_range: [0, 1]
        initial: 0
        
      - name: "relocated"
        raw_range: [0, 1]
        initial: 0
    
    objectives:
      - name: "minimize_expected_loss"
        param: "cumulative_damage"
        target: [0.0, 0.15]
        weight: 0.40
        literature: "Botzen 2009"
        
      - name: "optimize_investment"
        param: "property_value"
        target: [0.4, 0.8]
        weight: 0.40
        literature: "Bin 2008 - Home value preservation"
        
      - name: "maintain_lifestyle"
        param: "income"
        target: [0.3, 1.0]
        weight: 0.20
        literature: "de Moel 2014"
    
    skills:
      - id: "buy_insurance"
        description: "Purchase flood insurance"
        affects: "has_insurance"
        direction: "increase"
        
      - id: "elevate_house"
        description: "Elevate home"
        affects: "elevated"
        direction: "increase"
        
      - id: "relocate"
        description: "Relocate"
        affects: "relocated"
        direction: "increase"
        
      - id: "do_nothing"
        description: "No action"
        affects: null
        direction: "none"
