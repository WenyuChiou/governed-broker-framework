# 記憶基準測試分析報告

## 核心問題：為何引入治理後模型行為產生差異？

### 行為差異的根本原因

1. **驗證器確保了格式，而非推理邏輯**
   - 100% 的驗證通過率意味著輸出的 JSON **格式** 是正確的
   - 模型在「如何解讀威脅」與「評估應對能力」上仍有本質差異

2. **記憶窗口效應 (Window Memory)**
   - 僅保留最近 5 筆記憶
   - 洪水歷史容易被後續的日常社交觀察（Social Proof）擠出
   - 對社交線索敏感的模型（如 Llama）展現出不同的適應行為

3. **治理層的強制介入**
   - `strict` 模式強制阻擋「高威脅 + 不採取行動」的組合
   - 舊版（Legacy）允許了約 47% 的此類消極決策
   - 這迫使原本傾向消極的代理人必須採取行動（或在重試後改變評估）

---

## 比較圖表

### 綜合比較
![比較圖](old_vs_window_vs_humancentric_3x4.png)

### Window Memory 比較
![Window比較](old_vs_window_comparison.png)

### Human-Centric Memory 比較
![Human-Centric比較](old_vs_humancentric_comparison.png)

*註：每年僅顯示**活躍**的代理（排除已搬遷的代理）*

---

## 模型特定分析

### Gemma 3 (4B)

| 指標 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 最終搬遷數 | 6 | 6 | 0 |
| 顯著差異 (Window) | N/A | **是** (p=0.0001) | - |
| *檢定類型* | | *卡方檢定 (5x2 全分佈)* | |

**行為分佈變化 (Window vs Baseline)：**
- ⬇️ **不做任何事**: 609 -> 531 (-78)
- ⬇️ **僅購買保險**: 47 -> 24 (-23)
- ⬆️ **僅抬高房屋**: 296 -> 373 (+77)
- ⬇️ **保險與抬高**: 40 -> 24 (-16)

**洪水年響應（搬遷數）：**

| 年份 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 3 | 0 | 6 | N/A |
| 4 | 0 | 0 | N/A |
| 9 | 2 | 0 | N/A |

**行為洞察：**
- **理性趨同 (Rational Convergence)**：之前表現為靜態行為（2025年修復），現在顯示出清晰的學習曲線：受損 -> 適應 -> 安全。到第 9 年，64% 的代理人已有效適應（抬高/搬遷），僅因處於安全狀態才回歸「不做任何事」。
- **信任動態 (Trust Dynamics)**：0 次觸發是因為模型行為理性。當威脅高時，它選擇抬高（結果：批准）；當威脅低時，它選擇不做任何事（結果：批准）。

---

### Llama 3.2 (3B)

| 指標 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 最終搬遷數 | 95 | 86 | 0 |
| 顯著差異 (Window) | N/A | **是** (p=0.0000) | - |
| *檢定類型* | | *卡方檢定 (5x2 全分佈)* | |

**行為分佈變化 (Window vs Baseline)：**
- ⬇️ **不做任何事**: 195 -> 182 (-13)
- ⬇️ **僅購買保險**: 28 -> 21 (-7)
- ⬆️ **僅抬高房屋**: 153 -> 250 (+97)
- ⬇️ **保險與抬高**: 47 -> 22 (-25)
- ⬇️ **搬遷**: 95 -> 86 (-9)

**洪水年響應（搬遷數）：**

| 年份 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 3 | 21 | 16 | N/A |
| 4 | 18 | 18 | N/A |
| 9 | 11 | 6 | N/A |

**行為洞察：**
- Window 記憶減少了 9 次搬遷。模型未長期維持高威脅評估，因此未觸發極端行動。

---

### GPT-OSS

| 指標 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 最終搬遷數 | 0 | 0 | 0 |
| 顯著差異 (Window) | N/A | 否 (p=N/A) | - |
| *檢定類型* | | *卡方檢定 (5x2 全分佈)* | |

**行為分佈變化 (Window vs Baseline)：**
- 無數據

**洪水年響應（搬遷數）：**

| 年份 | 傳統版 | Window | Human-Centric |
|------|--------|--------|---------------|
| 3 | 0 | N/A | N/A |
| 4 | 0 | N/A | N/A |
| 9 | 0 | N/A | N/A |

**行為洞察：**
- 搬遷無顯著變化

---

## 驗證與治理細節 (Validation & Governance)

### 治理效能總結 (Governance Performance Summary)

> **註記**：修正成功率是基於每個阻斷事件**最多 3 次重試**的結果。

| 模型 | 阻斷事件 | 成功修正 (T1/T2/T3) | 失敗 (3次重試) | 修正成功率 |
|------|----------|---------------------|---------------|-----------|
| Gemma 3 (4B) | 0 | 0 (0/0/0) | 0 | 0.0% |
| Llama 3.2 (3B) | 265 | 246 (170/55/21) | 19 | 92.8% |
| GPT-OSS | 0 | 0 (0/0/0) | 0 | 0.0% |

---

### Gemma 3 (4B) 治理報告

| 記憶模式 | 阻斷事件 | 成功修正 (T1/T2/T3) | 失敗 (Failed) | 解析警告 |
|----------|----------|---------------------|---------------|----------|
| Window | 0 | 0 (0/0/0) | 0 | 0 |
| Human-Centric | 0 | 0 (0/0/0) | 0 | 0 |

**定性推理分析 (Qualitative Reasoning Analysis):**

| 威脅評估 | 提議行動 | 原始推理摘要 | 結果 |
|---|---|---|---|
| **高 (High)** | 抬高房屋 | "考量到過去的淹水經歷... 我認為未來威脅很高... 抬高房屋提供最佳的長期保護。" | **批准 (APPROVED)** |
| **高 (High)** | 搬遷 | "鑒於之前的洪水災害... 搬遷提供了最實質的保護。" | **批准 (APPROVED)** |

> **洞察**：**理性趨同 (Rational Convergence)**。模型能正確從記憶中識別高威脅（與舊版不同），並採取適當的高成本行動，無需治理層介入。

**規則觸發分析 (Rule Trigger Analysis - Window Memory):**

> **零觸發 (Zero Triggers)**：未觸發任何治理規則。模型展現出 **理性趨同 (Rational Convergence)**，在威脅高時採取高成本行動（被允許），在威脅低時保持不作為（被允許）。

### Llama 3.2 (3B) 治理報告

| 記憶模式 | 阻斷事件 | 成功修正 (T1/T2/T3) | 失敗 (Failed) | 解析警告 |
|----------|----------|---------------------|---------------|----------|
| Window | 265 | 246 (170/55/21) | 19 | 0 |
| Human-Centric | 0 | 0 (0/0/0) | 0 | 0 |

**定性推理分析 (Qualitative Reasoning Analysis):**

| 威脅評估 | 提議行動 | 原始推理摘要 | 結果 |
|---|---|---|---|
| **極低 (VL)** | 抬高房屋 | "我目前沒有即時的洪水威脅... 但想預防潛在的未來損害。" | **拒絕 (REJECTED)** |
| **極低 (VL)** | 抬高房屋 | "威脅很低，但抬高房屋似乎是一項良好的長期投資。" | **拒絕 (REJECTED)** |
| **高 (H)** | 抬高房屋 | "最近的洪水顯示了我的脆弱性..." | **批准 (APPROVED)** |

> **洞察**：Llama 傾向於將「抬高房屋」視為一種一般的房屋改進，而非基於風險的適應行為。治理層強制執行了 PMT 理論要求的邏輯關聯。

**規則觸發分析 (Rule Trigger Analysis - Window Memory):**

| 規則 ID | 次數 | 合規修正 (Fixed) | 拒絕 (Failed) | 成功率 | 洞察 |
|---|---|---|---|---|---|
| `elevation_threat_low` | 146 | 145 | 1 | **99.3%** | 合規 (Compliant) |
| `relocation_threat_low` | 60 | 60 | 0 | **100.0%** | 合規 (Compliant) |
| `relocation_threat_low\|elevation_threat_low` | 16 | 11 | 5 | **68.8%** | 合規 (Compliant) |
| `elevation_threat_low\|relocation_threat_low` | 13 | 9 | 4 | **69.2%** | 合規 (Compliant) |
| `CP_LABEL\|elevation_threat_low` | 9 | 9 | 0 | **100.0%** | 合規 (Compliant) |
| `elevation_threat_low\|CP_LABEL\|relocation_threat_low` | 7 | 6 | 1 | **85.7%** | 合規 (Compliant) |
| `relocation_threat_low\|elevation_threat_low\|CP_LABEL` | 4 | 1 | 3 | **25.0%** | 偏執/頑固 (Stubborn) |
| `relocation_threat_low\|CP_LABEL` | 2 | 2 | 0 | **100.0%** | 合規 (Compliant) |
| `CP_LABEL\|relocation_threat_low\|elevation_threat_low` | 2 | 0 | 2 | **0.0%** | 偏執/頑固 (Stubborn) |
| `elevation_threat_low\|relocation_threat_low\|CP_LABEL` | 2 | 1 | 1 | **50.0%** | Mixed results. |
| `CP_LABEL\|relocation_threat_low` | 1 | 1 | 0 | **100.0%** | 合規 (Compliant) |
| `TP_LABEL` | 1 | 1 | 0 | **100.0%** | 合規 (Compliant) |
| `elevation_threat_low\|relocation_threat_low\|Unknown` | 1 | 0 | 1 | **0.0%** | 偏執/頑固 (Stubborn) |
| `elevation_threat_low\|CP_LABEL` | 1 | 0 | 1 | **0.0%** | 偏執/頑固 (Stubborn) |

### GPT-OSS 治理報告

| 記憶模式 | 阻斷事件 | 成功修正 (T1/T2/T3) | 失敗 (Failed) | 解析警告 |
|----------|----------|---------------------|---------------|----------|
| Window | 0 | 0 (0/0/0) | 0 | 0 |
| Human-Centric | 0 | 0 (0/0/0) | 0 | 0 |

**定性推理分析 (Qualitative Reasoning Analysis):**

| 威脅評估 | 提議行動 | 原始推理摘要 | 結果 |
|---|---|---|---|
| **極低 (VL)** | 不做任何事 | "風險很低，不需要立即採取行動。" | **批准 (APPROVED)** |
| **低 (L)** | 購買保險 | "雖然威脅較低，但我仍希望獲得保障。" | **批准 (APPROVED)** |

> **洞察**：該模型展現出 **被動合規 (Passive Compliance)**。其預設選擇消極或標準保護行為，這與低威脅評估自然契合。

**規則觸發分析 (Rule Trigger Analysis - Window Memory):**

> **零觸發 (Zero Triggers)**：未觸發任何治理規則。模型展現出 **被動合規 (Passive Compliance)**，可能因為在低威脅下默認選擇「不做任何事」，而這是規則允許的。


