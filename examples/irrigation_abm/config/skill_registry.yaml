# Irrigation ABM Skill Registry
# Defines available skills for Colorado River Basin irrigation farmers.
# Adapted from Hung & Yang (2021) RL-ABM-CRSS framework â€” LLM-driven version.

skills:
  - skill_id: increase_demand
    description: "Request more water allocation for next period. Higher potential yield but risks exceeding available supply and facing curtailment penalties."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions:
      - "not at_allocation_cap"
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 30   # Aggressive cluster cap; tighter caps via governance
      magnitude_default: 10   # Global fallback when persona default unavailable
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3] }
        magnitude_pct: { type: number, minimum: 1, maximum: 30 }
    conflicts_with: []

  - skill_id: decrease_demand
    description: "Request less water allocation. Lower crop yield potential but reduces curtailment risk and demonstrates cooperative basin management."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions: []
    institutional_constraints:
      annual: true
      magnitude_type: "percentage"
      max_magnitude_pct: 30
      magnitude_default: 10
    allowed_state_changes:
      - request
      - diversion
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3] }
        magnitude_pct: { type: number, minimum: 1, maximum: 30 }
    conflicts_with: []

  - skill_id: maintain_demand
    description: "Maintain current water demand level. No change to irrigation practices. Appropriate when water availability is stable and current allocation meets needs."
    eligible_agent_types: ["irrigation_farmer"]
    preconditions: []
    institutional_constraints: {}
    allowed_state_changes: []
    implementation_mapping: "env.execute_skill"
    output_schema:
      type: object
      required: [decision]
      properties:
        decision: { type: integer, enum: [1, 2, 3] }
    conflicts_with: []

default_skill: maintain_demand
