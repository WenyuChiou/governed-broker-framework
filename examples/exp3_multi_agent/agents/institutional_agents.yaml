# Exp3 Multi-Agent Institutional Agents Configuration
# Migrated to use generic BaseAgent framework with 0-1 normalization

agents:
  # =========================================================================
  # INSURANCE AGENT
  # =========================================================================
  - name: "InsuranceCo"
    type: "insurance"
    
    role: "Regional flood insurance company managing risk and pricing"
    persona: |
      You are the Chief Risk Officer for a regional flood insurance company.
      
      OBJECTIVES (by priority):
      1. Maintain solvency > 50% of maximum reserve
      2. Keep loss ratio in 60-80% range (normalized: 0.40-0.53)
      3. Grow market penetration to 30-50%
      
      CONSTRAINTS:
      - Can only adjust premium by ±15% per year
      - Cannot lower rates if solvency < 30%
    
    state:
      - name: "loss_ratio"
        raw_range: [0, 1.5]
        initial: 0.6
        description: "Claims paid / Premiums collected (60% = healthy)"
        
      - name: "solvency"
        raw_range: [0, 2000000]
        initial: 1000000
        description: "Risk pool balance ($)"
        
      - name: "premium_rate"
        raw_range: [0.02, 0.15]
        initial: 0.05
        description: "Annual premium as % of coverage (5% starting)"
        
      - name: "market_share"
        raw_range: [0, 1]
        initial: 0.0
        description: "Policies / Total eligible households"
    
    perception:
      - type: "environment"
        source: "simulation"
        params: ["flood_occurred", "year"]
        
      - type: "agent"
        source: "Household"
        params: ["adoption_rate", "avg_tp"]
    
    objectives:
      - name: "maintain_solvency"
        param: "solvency"
        target: [0.5, 1.0]
        weight: 0.4
        literature: "Dong 1996 - solvency-based pricing"
        
      - name: "target_loss_ratio"
        param: "loss_ratio"
        target: [0.40, 0.53]
        weight: 0.35
        literature: "Kousky 2017 - NFIP 60-80% target"
        
      - name: "grow_market"
        param: "market_share"
        target: [0.30, 0.60]
        weight: 0.25
        literature: "Gourevitch 2025 - uptake effects"
    
    constraints:
      - name: "rate_change_limit"
        param: "premium_rate"
        max_change: 0.15
        bounds: [0, 1]
        literature: "NFIP Risk Rating 2.0"
        
      - name: "solvency_floor"
        param: "solvency"
        max_change: 1.0
        bounds: [0.25, 1.0]
        literature: "State insurance regulations"
    
    skills:
      - id: "raise_premium"
        description: "Increase premium rate to improve loss ratio"
        affects: "premium_rate"
        direction: "increase"
        
      - id: "lower_premium"
        description: "Decrease premium rate to attract customers"
        affects: "premium_rate"
        direction: "decrease"
        
      - id: "maintain_premium"
        description: "Keep premium rate unchanged"
        affects: null
        direction: "none"

  # =========================================================================
  # GOVERNMENT AGENT
  # =========================================================================
  - name: "StateGov"
    type: "government"
    
    role: "State hazard mitigation office managing subsidy programs"
    persona: |
      You are a State Hazard Mitigation Officer managing FEMA-funded programs.
      
      OBJECTIVES (by priority):
      1. Increase MG (Marginalized Group) adoption to 40-60%
      2. Reduce equity gap (MG vs NMG difference) below 15%
      3. Use 70-90% of annual budget efficiently
      
      CONSTRAINTS:
      - Can only adjust subsidy by ±15% per year
      - Must allocate at least 60% to MG communities
      - Must keep 10% emergency reserve
    
    state:
      - name: "budget_used"
        raw_range: [0, 500000]
        initial: 0
        description: "Annual budget spent ($)"
        
      - name: "subsidy_rate"
        raw_range: [0.20, 0.95]
        initial: 0.50
        description: "Government cost-share percentage (50% starting)"
        
      - name: "mg_adoption"
        raw_range: [0, 1]
        initial: 0.0
        description: "Marginalized group adaptation rate"
        
      - name: "nmg_adoption"
        raw_range: [0, 1]
        initial: 0.0
        description: "Non-marginalized group adaptation rate"
        
      - name: "equity_gap"
        raw_range: [0, 1]
        initial: 0.0
        description: "Disparity between NMG and MG adoption"
    
    perception:
      - type: "environment"
        source: "simulation"
        params: ["flood_occurred", "year"]
        
      - type: "agent"
        source: "InsuranceCo"
        params: ["premium_rate", "market_share"]
    
    objectives:
      - name: "increase_mg_adoption"
        param: "mg_adoption"
        target: [0.40, 0.70]
        weight: 0.40
        literature: "Siders 2021 - equity in managed retreat"
        
      - name: "reduce_equity_gap"
        param: "equity_gap"
        target: [0.0, 0.15]
        weight: 0.35
        literature: "Emrich 2022 - distributive inequity"
        
      - name: "budget_efficiency"
        param: "budget_used"
        target: [0.70, 0.90]
        weight: 0.25
        literature: "FEMA HMGP guidelines"
    
    constraints:
      - name: "subsidy_change_limit"
        param: "subsidy_rate"
        max_change: 0.15
        bounds: [0, 1]
        literature: "Policy stability"
        
      - name: "emergency_reserve"
        param: "budget_used"
        max_change: 1.0
        bounds: [0, 0.90]
        literature: "FEMA emergency fund rules"
    
    skills:
      - id: "increase_subsidy"
        description: "Raise subsidy rate to boost adoption"
        affects: "subsidy_rate"
        direction: "increase"
        
      - id: "decrease_subsidy"
        description: "Lower subsidy rate to conserve budget"
        affects: "subsidy_rate"
        direction: "decrease"
        
      - id: "maintain_subsidy"
        description: "Keep subsidy rate unchanged"
        affects: null
        direction: "none"
        
      - id: "target_mg_outreach"
        description: "Direct outreach to MG communities"
        affects: "mg_adoption"
        direction: "increase"
        literature: "Munoz 2016 - equity targeting"
