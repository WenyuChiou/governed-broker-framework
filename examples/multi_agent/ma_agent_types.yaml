household_owner:
  description: "Homeowners making adaptation decisions (Buyout/Elevation/Insurance) based on PMT. Reference: Rogers (1983), Bukvic (2022) doi:10.1016/j.apgeog.2022.102758"

  prompt_template: |
    ### [IDENTITY & BACKGROUND]
    {narrative_persona}

    ### [HISTORY & EXPERIENCE]
    {flood_experience_summary}

    ### [MEMORY & RECENT EVENTS]
    {memory}

    ### [CURRENT STATUS]
    You currently {insurance_status} flood insurance.
    {elevation_status_text}

    ### [ENVIRONMENTAL CONTEXT]
    - Government subsidy rate for elevation: {subsidy_rate:.0%}
    - Flood insurance premium rate: {premium_rate:.2%}

    Using the Protection Motivation Theory (PMT) and PADM, evaluate:
    - TP (Threat Perception): Assessment of severity/vulnerability.
    - CP (Coping Perception): Assessment of financial/technical ability.
    - SC (Social Capital): Ties to neighbors and mutual support (doi:10.1016/j.crm.2023.100498).
    - PA (Place Attachment): Emotional bond to this specific home (doi:10.1016/j.ijdrr.2020.101937).
    - SP (Stakeholder Perception): Trust in Government/Insurance programs (doi:10.1016/j.envsci.2017.03.012).

    Choose one:
    {options_text}

    Format:
    TP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    CP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    SC Assessment: [LOW/MODERATE/HIGH] because [explanation]
    PA Assessment: [LOW/MODERATE/HIGH] because [explanation]
    SP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    Final Decision: [number]
    Reasoning: [Brief justification]

  parsing:
    decision_keywords: ["final decision:", "decision:"]
    default_skill: "do_nothing"
    skill_map_non_elevated:
      "1": "do_nothing"
      "2": "buy_insurance"
      "3": "elevate_house"
      "4": "buyout_program"
    skill_map_elevated:
      "1": "do_nothing"
      "2": "buy_insurance"
      "3": "buyout_program"
    constructs:
      TP_LABEL:
        regex: "(?:tp\\s*(?:assessment|perception)?|threat\\s*perception)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      CP_LABEL:
        regex: "(?:cp\\s*(?:assessment|perception)?|coping\\s*perception)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      SC_LABEL:
        regex: "(?:sc\\s*(?:assessment|perception)?|social\\s*capital)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      PA_LABEL:
        regex: "(?:pa\\s*(?:assessment|perception)?|place\\s*attachment)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"

  governance_rules:
    identity_rules:
      already_elevated_block:
        precondition: elevated
        blocked_skills: ["elevate_house"]
        message: "[Rule: status_constraint] House is already elevated."
    thinking_rules:
      urgency_check:
        construct: TP_LABEL
        when_above: ["H"]
        blocked_skills: ["do_nothing"]
        message: "[Rule: PMT] High Threat but inaction chosen (Grothmann 2006)."
      coping_check:
        construct: CP_LABEL
        when_above: ["L"]
        blocked_skills: ["elevate_house", "buyout_program"]
        message: "[Rule: PMT] Low Coping but expensive action attempted."
      pa_relocation_block:
        construct: PA_LABEL
        when_above: ["H"]
        blocked_skills: ["buyout_program"]
        message: "[Rule: PA] High Place Attachment hinders buyout/relocation (Bukvic 2022 doi:10.1016/j.apgeog.2022.102758)."

household_renter:
  description: "Renter agents making mobility decisions based on PMT and community ties. Reference: Swapan (2021) doi:10.1016/j.ijdrr.2020.101937"

  prompt_template: |
    ### [IDENTITY & BACKGROUND]
    {narrative_persona}

    ### [HISTORY & EXPERIENCE]
    {flood_experience_summary}

    ### [MEMORY & RECENT EVENTS]
    {memory}

    ### [CURRENT STATUS]
    You currently {insurance_status} contents insurance.

    ### [ENVIRONMENTAL CONTEXT]
    - Flood insurance premium rate: {premium_rate:.2%}

    Using PMT and PADM, evaluate:
    - TP (Threat Perception): Assessment of severity/vulnerability.
    - CP (Coping Perception): Assessment of your ability to move or insure contents.
    - SC (Social Capital): Local support networks (doi:10.1016/j.crm.2023.100498).
    - PA (Place Attachment): Sense of belonging to this neighborhood.
    - SP (Stakeholder Perception): Trust in institutional assistance.

    Choose one:
    {options_text}

    Format:
    TP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    CP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    SC Assessment: [LOW/MODERATE/HIGH] because [explanation]
    PA Assessment: [LOW/MODERATE/HIGH] because [explanation]
    SP Assessment: [LOW/MODERATE/HIGH] because [explanation]
    Final Decision: [number]
    Reasoning: [Brief justification]

  parsing:
    decision_keywords: ["final decision:", "decision:"]
    default_skill: "do_nothing"
    skill_map:
      "1": "do_nothing"
      "2": "buy_contents_insurance"
      "3": "relocate"
    constructs:
      TP_LABEL:
        regex: "(?:tp\\s*(?:assessment|perception)?|threat\\s*perception)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      CP_LABEL:
        regex: "(?:cp\\s*(?:assessment|perception)?|coping\\s*perception)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      SC_LABEL:
        regex: "(?:sc\\s*(?:assessment|perception)?|social\\s*capital)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"
      PA_LABEL:
        regex: "(?:pa\\s*(?:assessment|perception)?|place\\s*attachment)[^.]*?\\[?(LOW|MODERATE|MEDIUM|MED|HIGH|L|M|H)\\]?"

  governance_rules:
    thinking_rules:
      sc_stability_bond:
        construct: SC_LABEL
        when_above: ["H"]
        blocked_skills: ["relocate"]
        message: "[Rule: SC] High Social Capital provides community stability, hindering independent relocation (Azad 2023 doi:10.1016/j.crm.2023.100498)."

government:
  description: "State government managing adaptation subsidies"
  actions:
    - id: increase_subsidy
      description: "Increase the subsidy rate for elevation grants"
    - id: decrease_subsidy
      description: "Decrease the subsidy rate due to budget constraints"
    - id: maintain_subsidy
      description: "Maintain the current subsidy rate"

insurance:
  description: "Insurance company managing premiums"
  actions:
    - id: raise_premium
      description: "Raise annual flood insurance premiums"
    - id: lower_premium
      description: "Lower annual flood insurance premiums"
    - id: maintain_premium
      description: "Maintain current premium levels"
